import React, { Component } from 'react';
import { apiUrl, OK, server } from '../../../constants';
import { httpClient } from '../../../utils/HttpClient'
import Chart from "react-apexcharts";
import SyntaxHighlighter from 'react-syntax-highlighter';
import { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';

class P_chart extends Component {

  constructor(props) {
    super(props)

    this.state = {
      file: null,
      backup_i: 30,
      response: [],
    }
  }

  renderUploadExcel = () => {
    const handleChange = (e) => {
      const files = e.target.files;
      if (files && files[0]) {
        document.getElementById("fileLable").innerHTML = e.target.files[0].name;
        this.setState({ file: files[0] });
      }
    };

    const SheetJSFT = ["csv"].map(function (x) { return "." + x; }).join(",");
    return <div>
      <div className="input-group">
        <div className="custom-file">
          <input type="file" className="form-control" id="file" accept={SheetJSFT} onChange={handleChange} />
          <label className="custom-file-label" id="fileLable" htmlFor="file">Upload a csv file</label>
        </div>
        <div className="input-group-append">
          <button className="btn btn-primary" onClick={this.doUpload}>Upload</button>
        </div>
      </div>
      <br></br>
      <div className="form-group">
        <label htmlFor="exampleInputEmail1">Calculate last n data</label>
        <input value={this.state.backup_i} onChange={(e) => {
          this.setState({ backup_i: e.target.value })
        }}
          type="number" className="form-control" min="0" placeholder="Enter n data" />
      </div>
      <div className="card card-success collapsed-card">
        <div style={{ cursor: 'pointer' }} className="card-header" data-card-widget="collapse">
          <h3 className="card-title">
            <b>How to use</b>
          </h3>
          {/* /.card-tools */}
        </div>

        <div className="card-body">
          <div className="input-group">
            <div>
              <div style={{ visibility: 'hidden' }}>
                <button onClick={async (e) => {
                  e.preventDefault()
                  const data = {
                    data: [
                      {
                        "sample": "1",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666
                      },
                      {
                        "sample": "2",
                        "n": 83,
                        "X": 1,
                        "P": 0.012048192771084338
                      },
                      {
                        "sample": "3",
                        "n": 90,
                        "X": 1,
                        "P": 0.011111111111111112
                      },
                      {
                        "sample": "4",
                        "n": 75,
                        "X": 1,
                        "P": 0.013333333333333334
                      },
                      {
                        "sample": "5",
                        "n": 39,
                        "X": 1,
                        "P": 0.02564102564102564
                      },
                      {
                        "sample": "6",
                        "n": 48,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "7",
                        "n": 37,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "8",
                        "n": 35,
                        "X": 2,
                        "P": 0.05714285714285714
                      },
                      {
                        "sample": "9",
                        "n": 83,
                        "X": 2,
                        "P": 0.024096385542168676
                      },
                      {
                        "sample": "10",
                        "n": 90,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "11",
                        "n": 83,
                        "X": 1,
                        "P": 0.012048192771084338
                      },
                      {
                        "sample": "12",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666
                      },
                      {
                        "sample": "13",
                        "n": 59,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "14",
                        "n": 98,
                        "X": 2,
                        "P": 0.02040816326530612
                      },
                      {
                        "sample": "15",
                        "n": 60,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "16",
                        "n": 97,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "17",
                        "n": 60,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "18",
                        "n": 90,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "19",
                        "n": 83,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "20",
                        "n": 83,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "21",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666
                      },
                      {
                        "sample": "22",
                        "n": 59,
                        "X": 2,
                        "P": 0.03389830508474576
                      },
                      {
                        "sample": "23",
                        "n": 98,
                        "X": 1,
                        "P": 0.01020408163265306
                      },
                      {
                        "sample": "24",
                        "n": 97,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "25",
                        "n": 83,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "26",
                        "n": 90,
                        "X": 1,
                        "P": 0.011111111111111112
                      },
                      {
                        "sample": "27",
                        "n": 83,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "28",
                        "n": 60,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "29",
                        "n": 58,
                        "X": 1,
                        "P": 0.017241379310344827
                      },
                      {
                        "sample": "30",
                        "n": 98,
                        "X": 0,
                        "P": 0
                      },
                      {
                        "sample": "31",
                        "n": 97,
                        "X": 0,
                        "P": 0,
                        "cl": 0.008640291041382447,
                        "ucl": "0.04107",
                        "lcl": 0
                      },
                      {
                        "sample": "32",
                        "n": 60,
                        "X": 2,
                        "P": 0.03333333333333333,
                        "cl": 0.008050089445438283,
                        "ucl": "0.03910",
                        "lcl": 0
                      },
                      {
                        "sample": "33",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.00858563036601898,
                        "ucl": "0.04081",
                        "lcl": 0
                      },
                      {
                        "sample": "34",
                        "n": 61,
                        "X": 3,
                        "P": 0.04918032786885246,
                        "cl": 0.008245533669262483,
                        "ucl": "0.04005",
                        "lcl": 0
                      },
                      {
                        "sample": "35",
                        "n": 97,
                        "X": 3,
                        "P": 0.030927835051546393,
                        "cl": 0.009220839096357769,
                        "ucl": "0.04294",
                        "lcl": 0
                      },
                      {
                        "sample": "36",
                        "n": 98,
                        "X": 3,
                        "P": 0.030612244897959183,
                        "cl": 0.009878760664571173,
                        "ucl": "0.04432",
                        "lcl": 0
                      },
                      {
                        "sample": "37",
                        "n": 85,
                        "X": 1,
                        "P": 0.011764705882352941,
                        "cl": 0.010979358805445762,
                        "ucl": "0.04686",
                        "lcl": 0
                      },
                      {
                        "sample": "38",
                        "n": 85,
                        "X": 0,
                        "P": 0,
                        "cl": 0.011182795698924731,
                        "ucl": "0.04702",
                        "lcl": 0
                      },
                      {
                        "sample": "39",
                        "n": 39,
                        "X": 1,
                        "P": 0.02564102564102564,
                        "cl": 0.010105263157894737,
                        "ucl": "0.04383",
                        "lcl": 0
                      },
                      {
                        "sample": "40",
                        "n": 36,
                        "X": 0,
                        "P": 0,
                        "cl": 0.009867009867009866,
                        "ucl": "0.04351",
                        "lcl": 0
                      },
                      {
                        "sample": "41",
                        "n": 57,
                        "X": 1,
                        "P": 0.017543859649122806,
                        "cl": 0.010101010101010102,
                        "ucl": "0.04453",
                        "lcl": 0
                      },
                      {
                        "sample": "42",
                        "n": 70,
                        "X": 1,
                        "P": 0.014285714285714285,
                        "cl": 0.010217681030653044,
                        "ucl": "0.04505",
                        "lcl": 0
                      },
                      {
                        "sample": "43",
                        "n": 34,
                        "X": 2,
                        "P": 0.058823529411764705,
                        "cl": 0.010172490048651039,
                        "ucl": "0.04485",
                        "lcl": 0
                      },
                      {
                        "sample": "44",
                        "n": 83,
                        "X": 2,
                        "P": 0.024096385542168676,
                        "cl": 0.011180679785330949,
                        "ucl": "0.04772",
                        "lcl": 0
                      },
                      {
                        "sample": "45",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.01125619090499775,
                        "ucl": "0.04804",
                        "lcl": 0
                      },
                      {
                        "sample": "46",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.01125619090499775,
                        "ucl": "0.04804",
                        "lcl": 0
                      },
                      {
                        "sample": "47",
                        "n": 90,
                        "X": 0,
                        "P": 0,
                        "cl": 0.011327594019030359,
                        "ucl": "0.04834",
                        "lcl": 0
                      },
                      {
                        "sample": "48",
                        "n": 60,
                        "X": 2,
                        "P": 0.03333333333333333,
                        "cl": 0.011175681716584712,
                        "ucl": "0.04770",
                        "lcl": 0
                      },
                      {
                        "sample": "49",
                        "n": 98,
                        "X": 2,
                        "P": 0.02040816326530612,
                        "cl": 0.012233801540552787,
                        "ucl": "0.05068",
                        "lcl": 0
                      },
                      {
                        "sample": "50",
                        "n": 97,
                        "X": 3,
                        "P": 0.030927835051546393,
                        "cl": 0.013051305130513051,
                        "ucl": "0.05261",
                        "lcl": 0
                      },
                      {
                        "sample": "51",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.014311270125223614,
                        "ucl": "0.05558",
                        "lcl": 0
                      },
                      {
                        "sample": "52",
                        "n": 70,
                        "X": 0,
                        "P": 0,
                        "cl": 0.013722886232846392,
                        "ucl": "0.05394",
                        "lcl": 0
                      },
                      {
                        "sample": "53",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.01277533039647577,
                        "ucl": "0.05151",
                        "lcl": 0
                      },
                      {
                        "sample": "54",
                        "n": 81,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012544802867383513,
                        "ucl": "0.05126",
                        "lcl": 0
                      },
                      {
                        "sample": "55",
                        "n": 28,
                        "X": 0,
                        "P": 0,
                        "cl": 0.01263537906137184,
                        "ucl": "0.05162",
                        "lcl": 0
                      },
                      {
                        "sample": "56",
                        "n": 67,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012956964368347987,
                        "ucl": "0.05293",
                        "lcl": 0
                      },
                      {
                        "sample": "57",
                        "n": 82,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012628624883068288,
                        "ucl": "0.05231",
                        "lcl": 0
                      },
                      {
                        "sample": "58",
                        "n": 39,
                        "X": 1,
                        "P": 0.02564102564102564,
                        "cl": 0.012634534394010294,
                        "ucl": "0.05234",
                        "lcl": 0
                      },
                      {
                        "sample": "59",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.013232514177693762,
                        "ucl": "0.05405",
                        "lcl": 0
                      },
                      {
                        "sample": "60",
                        "n": 80,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012610929472209247,
                        "ucl": "0.05224",
                        "lcl": 0
                      },
                      {
                        "sample": "61",
                        "n": 14,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012717852096090438,
                        "ucl": "0.05268",
                        "lcl": 0
                      },
                      {
                        "sample": "62",
                        "n": 69,
                        "X": 0,
                        "P": 0,
                        "cl": 0.013235294117647059,
                        "ucl": "0.05481",
                        "lcl": 0
                      },
                      {
                        "sample": "63",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012201073694485115,
                        "ucl": "0.05205",
                        "lcl": 0
                      },
                      {
                        "sample": "64",
                        "n": 32,
                        "X": 0,
                        "P": 0,
                        "cl": 0.012201073694485115,
                        "ucl": "0.05205",
                        "lcl": 0
                      },
                      {
                        "sample": "65",
                        "n": 52,
                        "X": 0,
                        "P": 0,
                        "cl": 0.01089108910891089,
                        "ucl": "0.04884",
                        "lcl": 0
                      },
                      {
                        "sample": "66",
                        "n": 65,
                        "X": 0,
                        "P": 0,
                        "cl": 0.009620253164556962,
                        "ucl": "0.04571",
                        "lcl": 0
                      },
                      {
                        "sample": "67",
                        "n": 92,
                        "X": 0,
                        "P": 0,
                        "cl": 0.008238928939237899,
                        "ucl": "0.04194",
                        "lcl": 0
                      },
                      {
                        "sample": "68",
                        "n": 78,
                        "X": 0,
                        "P": 0,
                        "cl": 0.007696254489481785,
                        "ucl": "0.04022",
                        "lcl": 0
                      },
                      {
                        "sample": "69",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.007723995880535531,
                        "ucl": "0.04037",
                        "lcl": 0
                      },
                      {
                        "sample": "70",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666,
                        "cl": 0.007049345417925478,
                        "ucl": "0.03790",
                        "lcl": 0
                      },
                      {
                        "sample": "71",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.007462686567164179,
                        "ucl": "0.03901",
                        "lcl": 0
                      },
                      {
                        "sample": "72",
                        "n": 32,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0068762278978389,
                        "ucl": "0.03697",
                        "lcl": 0
                      },
                      {
                        "sample": "73",
                        "n": 64,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0065065065065065065,
                        "ucl": "0.03606",
                        "lcl": 0
                      },
                      {
                        "sample": "74",
                        "n": 78,
                        "X": 2,
                        "P": 0.02564102564102564,
                        "cl": 0.005424063116370809,
                        "ucl": "0.03222",
                        "lcl": 0
                      },
                      {
                        "sample": "75",
                        "n": 41,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005437469105289174,
                        "ucl": "0.03230",
                        "lcl": 0
                      },
                      {
                        "sample": "76",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0054890219560878245,
                        "ucl": "0.03261",
                        "lcl": 0
                      },
                      {
                        "sample": "77",
                        "n": 90,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0054890219560878245,
                        "ucl": "0.03261",
                        "lcl": 0
                      },
                      {
                        "sample": "78",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0054890219560878245,
                        "ucl": "0.03261",
                        "lcl": 0
                      },
                      {
                        "sample": "79",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666,
                        "cl": 0.004440059200789344,
                        "ucl": "0.02871",
                        "lcl": 0
                      },
                      {
                        "sample": "80",
                        "n": 86,
                        "X": 0,
                        "P": 0,
                        "cl": 0.004022121669180492,
                        "ucl": "0.02734",
                        "lcl": 0
                      },
                      {
                        "sample": "81",
                        "n": 45,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0025278058645096056,
                        "ucl": "0.02108",
                        "lcl": 0
                      },
                      {
                        "sample": "82",
                        "n": 74,
                        "X": 0,
                        "P": 0,
                        "cl": 0.002577319587628866,
                        "ucl": "0.02149",
                        "lcl": 0
                      },
                      {
                        "sample": "83",
                        "n": 48,
                        "X": 0,
                        "P": 0,
                        "cl": 0.00257201646090535,
                        "ucl": "0.02145",
                        "lcl": 0
                      },
                      {
                        "sample": "84",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.002587991718426501,
                        "ucl": "0.02158",
                        "lcl": 0
                      },
                      {
                        "sample": "85",
                        "n": 98,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0026164311878597592,
                        "ucl": "0.02182",
                        "lcl": 0
                      },
                      {
                        "sample": "86",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.002523977788995457,
                        "ucl": "0.02105",
                        "lcl": 0
                      },
                      {
                        "sample": "87",
                        "n": 98,
                        "X": 1,
                        "P": 0.01020408163265306,
                        "cl": 0.0025329280648429585,
                        "ucl": "0.02112",
                        "lcl": 0
                      },
                      {
                        "sample": "88",
                        "n": 58,
                        "X": 1,
                        "P": 0.017241379310344827,
                        "cl": 0.003015075376884422,
                        "ucl": "0.02321",
                        "lcl": 0
                      },
                      {
                        "sample": "89",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666,
                        "cl": 0.0029865604778496766,
                        "ucl": "0.02299",
                        "lcl": 0
                      },
                      {
                        "sample": "90",
                        "n": 74,
                        "X": 0,
                        "P": 0,
                        "cl": 0.003524672708962739,
                        "ucl": "0.02538",
                        "lcl": 0
                      },
                      {
                        "sample": "91",
                        "n": 88,
                        "X": 1,
                        "P": 0.011363636363636364,
                        "cl": 0.0035353535353535356,
                        "ucl": "0.02545",
                        "lcl": 0
                      },
                      {
                        "sample": "92",
                        "n": 90,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0038948393378773127,
                        "ucl": "0.02648",
                        "lcl": 0
                      },
                      {
                        "sample": "93",
                        "n": 65,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0038554216867469878,
                        "ucl": "0.02621",
                        "lcl": 0
                      },
                      {
                        "sample": "94",
                        "n": 80,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0038461538461538464,
                        "ucl": "0.02615",
                        "lcl": 0
                      },
                      {
                        "sample": "95",
                        "n": 20,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0037593984962406013,
                        "ucl": "0.02556",
                        "lcl": 0
                      },
                      {
                        "sample": "96",
                        "n": 61,
                        "X": 4,
                        "P": 0.06557377049180328,
                        "cl": 0.003816793893129771,
                        "ucl": "0.02595",
                        "lcl": 0
                      },
                      {
                        "sample": "97",
                        "n": 80,
                        "X": 1,
                        "P": 0.0125,
                        "cl": 0.0057361376673040155,
                        "ucl": "0.03287",
                        "lcl": 0
                      },
                      {
                        "sample": "98",
                        "n": 86,
                        "X": 0,
                        "P": 0,
                        "cl": 0.00625,
                        "ucl": "0.03464",
                        "lcl": 0
                      },
                      {
                        "sample": "99",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.006226053639846743,
                        "ucl": "0.03451",
                        "lcl": 0
                      },
                      {
                        "sample": "100",
                        "n": 60,
                        "X": 0,
                        "P": 0,
                        "cl": 0.006295399515738499,
                        "ucl": "0.03490",
                        "lcl": 0
                      },
                      {
                        "sample": "101",
                        "n": 98,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005811138014527845,
                        "ucl": "0.03330",
                        "lcl": 0
                      },
                      {
                        "sample": "102",
                        "n": 98,
                        "X": 1,
                        "P": 0.01020408163265306,
                        "cl": 0.0057692307692307696,
                        "ucl": "0.03306",
                        "lcl": 0
                      },
                      {
                        "sample": "103",
                        "n": 72,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0060577819198508855,
                        "ucl": "0.03358",
                        "lcl": 0
                      },
                      {
                        "sample": "104",
                        "n": 58,
                        "X": 0,
                        "P": 0,
                        "cl": 0.0060352831940575676,
                        "ucl": "0.03346",
                        "lcl": 0
                      },
                      {
                        "sample": "105",
                        "n": 54,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005154639175257732,
                        "ucl": "0.03063",
                        "lcl": 0
                      },
                      {
                        "sample": "106",
                        "n": 92,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005123428039124359,
                        "ucl": "0.03044",
                        "lcl": 0
                      },
                      {
                        "sample": "107",
                        "n": 60,
                        "X": 1,
                        "P": 0.016666666666666666,
                        "cl": 0.00510204081632653,
                        "ucl": "0.03031",
                        "lcl": 0
                      },
                      {
                        "sample": "108",
                        "n": 83,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005644402634054563,
                        "ucl": "0.03234",
                        "lcl": 0
                      },
                      {
                        "sample": "109",
                        "n": 90,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005644402634054563,
                        "ucl": "0.03234",
                        "lcl": 0
                      },
                      {
                        "sample": "110",
                        "n": 83,
                        "X": 1,
                        "P": 0.012048192771084338,
                        "cl": 0.00510204081632653,
                        "ucl": "0.03031",
                        "lcl": 0
                      },
                      {
                        "sample": "111",
                        "n": 80,
                        "X": 0,
                        "P": 0,
                        "cl": 0.00557361820715281,
                        "ucl": "0.03194",
                        "lcl": 0
                      },
                      {
                        "sample": "112",
                        "n": 59,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005484460694698354,
                        "ucl": "0.03143",
                        "lcl": 0
                      },
                      {
                        "sample": "113",
                        "n": 96,
                        "X": 1,
                        "P": 0.010416666666666666,
                        "cl": 0.005522319374137137,
                        "ucl": "0.03164",
                        "lcl": 0
                      },
                      {
                        "sample": "114",
                        "n": 35,
                        "X": 0,
                        "P": 0,
                        "cl": 0.00585321927059883,
                        "ucl": "0.03245",
                        "lcl": 0
                      },
                      {
                        "sample": "115",
                        "n": 8,
                        "X": 1,
                        "P": 0.125,
                        "cl": 0.005919854280510018,
                        "ucl": "0.03282",
                        "lcl": 0
                      },
                      {
                        "sample": "116",
                        "n": 6,
                        "X": 0,
                        "P": 0,
                        "cl": 0.006647673314339981,
                        "ucl": "0.03574",
                        "lcl": 0
                      },
                      {
                        "sample": "117",
                        "n": 97,
                        "X": 0,
                        "P": 0,
                        "cl": 0.00682261208576998,
                        "ucl": "0.03668",
                        "lcl": 0
                      },
                      {
                        "sample": "118",
                        "n": 94,
                        "X": 0,
                        "P": 0,
                        "cl": 0.006338371526084837,
                        "ucl": "0.03513",
                        "lcl": 0
                      },
                      {
                        "sample": "119",
                        "n": 52,
                        "X": 1,
                        "P": 0.019230769230769232,
                        "cl": 0.005749880210828941,
                        "ucl": "0.03295",
                        "lcl": 0
                      },
                      {
                        "sample": "120",
                        "n": 35,
                        "X": 0,
                        "P": 0,
                        "cl": 0.005772005772005772,
                        "ucl": "0.03307",
                        "lcl": 0
                      }
                    ],
                    backup_i: 5
                  }
                  let response = await httpClient.post(server.P_CHART_URL + '_json', data)
                  console.log(response.data);
                }} className="btn btn-primary">Test</button>
              </div>
              <div className="card card-default">
                <div className="card-body">
                  <div>
                    <h2>Use CSV file</h2>
                    <a href="\doc\sample.csv" download={'sample.csv'}>Download Sample CSV</a>
                  </div>
                  <div>
                    <img src={'/images/p-chart/P-chart manual(csv).PNG'} />
                  </div>
                </div>
              </div>


              <div className="card card-default">
                <div className="card-body">
                  <h2>Use API</h2>
                  <p>Use http method <b>POST</b> to <a href={apiUrl + server.P_CHART_URL + '_json'} target="_blank">{apiUrl + server.P_CHART_URL + '_json'}</a></p>
                  <label>Example code : </label>
                  <SyntaxHighlighter language="javascript" style={docco}>
                    {`const data = {
  data: [
    {
      "sample": "1",
      "n": 60,
      "X": 1,
      "P": 0.016666666666666666
    },
    {
      "sample": "2",
      "n": 83,
      "X": 1,
      "P": 0.012048192771084338
    },
    {
      "sample": "3",
      "n": 90,
      "X": 1,
      "P": 0.011111111111111112
    },
    {
      "sample": "4",
      "n": 75,
      "X": 1,
      "P": 0.013333333333333334
    },
    {
      "sample": "5",
      "n": 39,
      "X": 1,
      "P": 0.02564102564102564
    },
    {
      "sample": "6",
      "n": 48,
      "X": 0,
      "P": 0
    },
    {
      "sample": "7",
      "n": 37,
      "X": 0,
      "P": 0
    },
    {
      "sample": "8",
      "n": 35,
      "X": 2,
      "P": 0.05714285714285714
    },
    {
      "sample": "9",
      "n": 83,
      "X": 2,
      "P": 0.024096385542168676
    },
    {
      "sample": "10",
      "n": 90,
      "X": 0,
      "P": 0
    },
    {
      "sample": "11",
      "n": 83,
      "X": 1,
      "P": 0.012048192771084338
    },
    {
      "sample": "12",
      "n": 60,
      "X": 1,
      "P": 0.016666666666666666
    },
    {
      "sample": "13",
      "n": 59,
      "X": 0,
      "P": 0
    },
    {
      "sample": "14",
      "n": 98,
      "X": 2,
      "P": 0.02040816326530612
    },
    {
      "sample": "15",
      "n": 60,
      "X": 0,
      "P": 0
    },
    {
      "sample": "16",
      "n": 97,
      "X": 0,
      "P": 0
    },
    {
      "sample": "17",
      "n": 60,
      "X": 0,
      "P": 0
    },
    {
      "sample": "18",
      "n": 90,
      "X": 0,
      "P": 0
    },
    {
      "sample": "19",
      "n": 83,
      "X": 0,
      "P": 0
    },
    {
      "sample": "20",
      "n": 83,
      "X": 0,
      "P": 0
    },
    {
      "sample": "21",
      "n": 60,
      "X": 1,
      "P": 0.016666666666666666
    },
    {
      "sample": "22",
      "n": 59,
      "X": 2,
      "P": 0.03389830508474576
    },
    {
      "sample": "23",
      "n": 98,
      "X": 1,
      "P": 0.01020408163265306
    },
    {
      "sample": "24",
      "n": 97,
      "X": 0,
      "P": 0
    },
    {
      "sample": "25",
      "n": 83,
      "X": 0,
      "P": 0
    },
    {
      "sample": "26",
      "n": 90,
      "X": 1,
      "P": 0.011111111111111112
    },
    {
      "sample": "27",
      "n": 83,
      "X": 0,
      "P": 0
    },
    {
      "sample": "28",
      "n": 60,
      "X": 0,
      "P": 0
    },
    {
      "sample": "29",
      "n": 58,
      "X": 1,
      "P": 0.017241379310344827
    },
    {
      "sample": "30",
      "n": 98,
      "X": 0,
      "P": 0
    },
    {
      "sample": "31",
      "n": 97,
      "X": 0,
      "P": 0,
      "cl": 0.008640291041382447,
      "ucl": "0.04107",
      "lcl": 0
    },
  ],
  backup_i: 5
}

let response = await axios.post("`+ apiUrl + server.P_CHART_URL + `_json` + `", data)
console.log(response.data);`}
                  </SyntaxHighlighter>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  }

  doUpload = async () => {
    try {
      var data = new FormData();
      data.append('file', this.state.file);
      data.append('backup_i', this.state.backup_i)

      let response = await httpClient.post(server.P_CHART_URL, data)
      console.log(response.data);
      this.setState({ response: response.data })
    } catch (error) {
      console.log(error);
      // alert('error')
    }
  }

  renderChart = () => {
    return (
      <div className="col-sm-12">
        <div className="card card-primary">
          <div className="card-header"></div>
          <div className="card-body">
            <Chart
              options={{
                chart: {
                  id: "basic-bar"
                },
                xaxis: {
                  categories: this.state.response.sample_name
                }
              }}
              series={
                [
                  {
                    name: 'P',
                    type: 'line',
                    data: this.state.response.list_p
                  },
                  {
                    name: 'CL',
                    type: 'line',
                    data: this.state.response.list_cl,
                    color: '#ffff00'
                  },
                  {
                    name: 'UCL',
                    type: 'line',
                    data: this.state.response.list_ucl,
                    color: '#ff0000'
                  },
                  {
                    name: 'LCL',
                    type: 'line',
                    data: this.state.response.list_lcl,
                    color: '#ff0000'
                  }

                ]
              }
              type="line"
            />
          </div>
          <div className='card-footer'></div>
        </div>
      </div>
    )
  }

  render() {
    return <div className="content-wrapper">
      <section className="content-header">
        <div className="container-fluid">
          <div className="row mb-2">
            <div className="col-sm-6">
              <h1>P-chart</h1>
            </div>
            <div className="col-sm-6">
              <ol className="breadcrumb float-sm-right">

              </ol>
            </div>
          </div>
        </div>{/* /.container-fluid */}
      </section>
      <section className="content">
        <div className="container-fluid">
          <div className="row">
            <div className="col-sm-12">
              <div className="card card-primary">
                <div className="card-header">Option</div>
                <div className="card-body">
                  {this.renderUploadExcel()}
                </div>
                <div className='card-footer'></div>
              </div>
            </div>

            {this.state.response.api_result === OK && this.renderChart()}

          </div>
        </div>
      </section>
    </div>;
  }
}

export default P_chart;
